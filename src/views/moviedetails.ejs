<!-- views/movie_details.ejs -->
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Movie Details</title>
</head>

<style>
    /* Overall styling */
    /* Style for the main container */
    .details-container {
        max-width: 600px;
        margin: 0 auto;
        padding: 20px;
        background-color: #f8f8f8;
        border-radius: 8px;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
    }

    /* Style for individual detail boxes */
    .details-box {
        margin-bottom: 15px;
    }

    /* Style for title box */
    .title-box {
        border-bottom: 2px solid #333;
        padding-bottom: 10px;
    }

    .title-box p {
        font-size: 24px;
        font-weight: bold;
        margin: 0;
    }

    /* Style for strong tags */
    .details-box strong {
        font-weight: bold;
    }

    /* Style for links */
    .details-box a {
        color: #007bff;
        text-decoration: none;
    }

    .details-box a:hover {
        text-decoration: underline;
    }

    /* Style for review text */
    .review-text {
        font-style: italic;
        color: #555;
    }
</style>

<body>
    <div class="details-container" >
        <h1>Movie Details</h1>
        <div class="details-box title-box">
            <p><strong>Title:</strong>
                <%= movie[0].title %>
            </p>
        </div>
        <div class="details-box genre-box">
            <p><strong>Genre:</strong>
                <%= movie[0].genre %>
            </p>
        </div>
        <div class="details-box release-date-box">
            <p><strong>Release Date:</strong>
                <%= movie[0].release_date %>
            </p>
        </div>
        <div class="details-box runtime-box">
            <p><strong>Runtime:</strong>
                <%= movie[0].runtime %> minutes
            </p>
        </div>
        <div class="details-box budget-box">
            <p><strong>Budget:</strong>
                <%= movie[0].budget %>
            </p>
        </div>
        <div class="details-box revenue-box">
            <p><strong>Revenue:</strong>
                <%= movie[0].revenue %>
            </p>
        </div>
        <div class="details-box rating-box">
            <p><strong>Rating:</strong>
                <%= movie[0].rating %>
            </p>
        </div>
        <div class="details-box director-box">
            <p><strong>Director:</strong> <a href="#" onclick="dir_presshandler()">
                    <%= movie[0].name %>
                </a></p>
        </div>
        <div class="details-box actor-box">
            <p><strong>Actors:</strong></p>
            <% for (let i=0; i < movie.length; i++) { %>
                    <a href="#" onclick="act_presshandler('<%=movie[i].actor_name %>')">
                        <%= movie[i].actor_name %>
                    </a>
                    <% if (i !==movie.length - 1) { %>
                        ,
                        <% } %>
                <% } %>
        </div>
        <div class="details-box producer-box">
            <p><strong>Producer:</strong> <a href="#" onclick="prod_presshandler()">
                    <%= movie[0].producer_name %>
                </a></p>
        </div>
        
        <div class="details-box producer-box">
            <p><strong>Reviews Given By:</strong>
                <%= movie[0].user_name %>:
                    
                    <%= movie[0].review_text %>
                        </a>
                </p>
            </p>
        </div>

        <div class="details-box producer-box">
        </div>


        <div class="details-box crew-box">
            <p><strong>Crew:</strong>
                <a href = "#" onclick="crew_presshandler()"><%= movie[0].crew_name %></a>
                    </a>
            </p>
        </div>
    </div>
    <script>
        const dir_presshandler = () => {
            var element = '<%= movie[0].name %>'
            const encodedval = encodeURIComponent(element)
            window.location.href = 'http://localhost:3001/api/director/' + encodedval;
        }

        const crew_presshandler = () => {
            var element = '<%= movie[0].crew_name %>'
            const encodedval = encodeURIComponent(element)
            window.location.href = 'http://localhost:3001/api/crew/' + encodedval;
        }

        const act_presshandler = (actorname) => {
            const encodedval = encodeURIComponent(actorname)
            window.location.href = 'http://localhost:3001/api/actor/' + encodedval;
        }

        const prod_presshandler = () => {
            var element = '<%= movie[0].producer_name %>'
            const encodedval = encodeURIComponent(element)
            window.location.href = 'http://localhost:3001/api/producer/' + encodedval;
        }
    </script>
</body>

</html>